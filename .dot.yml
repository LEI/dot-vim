---
role:
  pkg:
    - name: curl
      action: install
    # - fzf # $(brew --prefix)/opt/fzf/install
    # - git
    - name: vim
      os: ["!darwin"]
    - name: vim
      os: ["darwin"]
      args:
        # - --with-cscope
        - --with-lua
        - --with-luajit
        - --with-override-system-vi
        - --with-python
        # - --with-pyhton3
        # - --with-custom-python
        # - --with-custom-ruby

    # https://neovim.io/doc
    - neovim
    # https://github.com/neovim/node-client
    - name: neovim
      type: npm
    # https://github.com/neovim/python-client
    # - name:
    #     - setuptools
    #     - wheel
    #     - greenlet
    #     - neovim
    #   type: pip2
    - name: neovim
      type: pip2
      os: ["archlinux", "centos", "darwin"]
    - name: neovim
      type: pip3
      os: ["archlinux", "centos", "darwin"]
    # - name: python-neovim
    #   os: ["arch", "darwin"]
    # https://github.com/alexgenco/neovim-ruby
    - name: neovim
      type: gem
      os: ["archlinux", "darwin"]

    # Linters (c.f. config/ale.vim)
    # - name: vim-vint
    #   type: pip3

    # Fixers
    - name: shfmt
      os: darwin

  dir:
    - .vim
  link:
    # - "[^.]*:.vim"
    # - "autoload/*:.vim/autoload"
    - "*.vim:.vim"
    - "autoload:.vim"
    - "config:.vim"
    - "ftdetect:.vim"
    - "ftplugin:.vim"
    - "plugin:.vim"
    - "syntax:.vim"
  line:
    ".vimrc": "source $HOME/.vim/init.vim"
    ".gvimrc": "source $HOME/.vim/ginit.vim"
  post_install:
    - vim --version | head -n1
    - nvim --version | head -n1
    - command: command -v neovim-node-host
      # $(npm prefix --global)/bin
      env: PATH=$PATH:$HOME/.node_modules/bin
    - command: |
        python2 -c 'import neovim'
        python3 -c 'import neovim' || python36 -c 'import neovim'
      os: ["archlinux", "centos", "darwin"]
    # GEM_HOME="${GEM_HOME:-$(ruby -e 'print Gem.user_dir')}"
    # PATH="$PATH:$GEM_HOME/bin"
    - command: command -v neovim-ruby-host
      env: PATH="$PATH:${GEM_HOME:-$(ruby -e 'print Gem.user_dir')}/bin"
      os: ["archlinux", "darwin"]
      # env: PATH="$PATH:${GEM_HOME:-$(ruby -e 'print Gem.user_dir')}/bin"
    # TODO: non-interactive nvim +checkhealth +qa
